//[calendar Javascript]

//Project:	Minimal Admin - Responsive Admin Template
//Version:  1.1.0
//Last change:  18/09/2017
//Primary use:   Used only for the event calendar


!function(e){"use strict";var t=function(){this.$body=e("body"),this.$calendar=e("#calendar"),this.$event="#external-events div.external-event",this.$categoryForm=e("#add-new-events form"),this.$extEvents=e("#external-events"),this.$modal=e("#my-event"),this.$saveCategoryBtn=e(".save-category"),this.$calendarObj=null};t.prototype.onDrop=function(t,n){var a=this,i=t.data("eventObject"),l=t.attr("data-class"),o=e.extend({},i);o.start=n,l&&(o.className=[l]),a.$calendar.fullCalendar("renderEvent",o,!0),e("#drop-remove").is(":checked")&&t.remove()},t.prototype.onEventClick=function(t,n,a){var i=this,l=e("<form></form>");l.append("<label>Change event name</label>"),l.append("<div class='input-group'><input class='form-control' type=text value='"+t.title+"' /><span class='input-group-btn'><button type='submit' class='btn btn-success waves-effect waves-light'><i class='fa fa-check'></i> Save</button></span></div>"),i.$modal.modal({backdrop:"static"}),i.$modal.find(".delete-event").show().end().find(".save-event").hide().end().find(".modal-body").empty().prepend(l).end().find(".delete-event").unbind("click").click(function(){i.$calendarObj.fullCalendar("removeEvents",function(e){return e._id==t._id}),i.$modal.modal("hide")}),i.$modal.find("form").on("submit",function(){return t.title=l.find("input[type=text]").val(),i.$calendarObj.fullCalendar("updateEvent",t),i.$modal.modal("hide"),!1})},t.prototype.onSelect=function(t,n,a){var i=this;i.$modal.modal({backdrop:"static"});var l=e("<form></form>");l.append("<div class='row'></div>"),l.find(".row").append("<div class='col-md-6'><div class='form-group'><label class='control-label'>Event Name</label><input class='form-control' placeholder='Insert Event Name' type='text' name='title'/></div></div>").append("<div class='col-md-6'><div class='form-group'><label class='control-label'>Category</label><select class='form-control' name='category'></select></div></div>").find("select[name='category']").append("<option value='bg-danger'>Danger</option>").append("<option value='bg-success'>Success</option>").append("<option value='bg-purple'>Purple</option>").append("<option value='bg-primary'>Primary</option>").append("<option value='bg-pink'>Pink</option>").append("<option value='bg-info'>Info</option>").append("<option value='bg-warning'>Warning</option></div></div>"),i.$modal.find(".delete-event").hide().end().find(".save-event").show().end().find(".modal-body").empty().prepend(l).end().find(".save-event").unbind("click").click(function(){l.submit()}),i.$modal.find("form").on("submit",function(){var e=l.find("input[name='title']").val(),a=(l.find("input[name='beginning']").val(),l.find("input[name='ending']").val(),l.find("select[name='category'] option:checked").val());return null!==e&&0!=e.length?(i.$calendarObj.fullCalendar("renderEvent",{title:e,start:t,end:n,allDay:!1,className:a},!0),i.$modal.modal("hide")):alert("You have to give a title to your event"),!1}),i.$calendarObj.fullCalendar("unselect")},t.prototype.enableDrag=function(){e(this.$event).each(function(){var t={title:e.trim(e(this).text())};e(this).data("eventObject",t),e(this).draggable({zIndex:999,revert:!0,revertDuration:0})})},t.prototype.init=function(){this.enableDrag();var t=new Date,n=(t.getDate(),t.getMonth(),t.getFullYear(),new Date(e.now())),a=[{title:"Released Ample Admin!",start:"2017-08-08",end:"2017-08-08",className:"bg-info"},{title:"This is today check date",start:n,end:n,className:"bg-danger"},{title:"This is your birthday",start:"2017-09-08",end:"2017-09-08",className:"bg-info"},{title:"Hanns birthday",start:"2017-10-08",end:"2017-10-08",className:"bg-danger"},{title:"Like it?",start:new Date(e.now()+7848e5),className:"bg-success"}],i=this;i.$calendarObj=i.$calendar.fullCalendar({slotDuration:"00:15:00",minTime:"08:00:00",maxTime:"19:00:00",defaultView:"month",handleWindowResize:!0,header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},events:a,editable:!0,droppable:!0,eventLimit:!0,selectable:!0,drop:function(t){i.onDrop(e(this),t)},select:function(e,t,n){i.onSelect(e,t,n)},eventClick:function(e,t,n){i.onEventClick(e,t,n)}}),this.$saveCategoryBtn.on("click",function(){var e=i.$categoryForm.find("input[name='category-name']").val(),t=i.$categoryForm.find("select[name='category-color']").val();null!==e&&0!=e.length&&(i.$extEvents.append('<div class="dot-outline external-event text-'+t+'" data-class="bg-'+t+'" style="position: relative;"><i class="fa fa-hand-o-right"></i>'+e+"</div>"),i.enableDrag())})},e.CalendarApp=new t,e.CalendarApp.Constructor=t}(window.jQuery),function(e){"use strict";e.CalendarApp.init()}(window.jQuery);